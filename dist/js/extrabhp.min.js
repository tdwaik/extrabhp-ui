/*!
 * Thaer Aldwaik -  v1.0.0
 * Copyright 2018 Thaer Aldwaik
 * Licensed under ISC
 */
"use strict";var app=angular.module("app",["ngRoute","ngCookies","ngSanitize","ngMessages"]);app.config(["$httpProvider",function(e){var t="application/x-www-form-urlencoded;charset=utf-8";e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.defaults.headers.post["Content-Type"]=t,e.defaults.headers.put["Content-Type"]=t,e.defaults.transformRequest=[function(e){var t=function(e){var n,r,o,a,s,i,u,c="";for(n in e)if(r=e[n],r instanceof Array)for(u=0;u<r.length;++u)s=r[u],o=n+"["+u+"]",i={},i[o]=s,c+=t(i)+"&";else if(r instanceof Object)for(a in r)s=r[a],o=n+"["+a+"]",i={},i[o]=s,c+=t(i)+"&";else void 0!==r&&null!==r&&(c+=encodeURIComponent(n)+"="+encodeURIComponent(r)+"&");return c.length?c.substr(0,c.length-1):c};return angular.isObject(e)&&"[object File]"!==String(e)?t(e):e}]}]).run(["$http","$cookies",function(e,t){}]),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});
app.config(["$routeProvider","$locationProvider",function(e,t){t.hashPrefix(""),t.html5Mode(!0),e.when("/",{templateUrl:"/assets/view/homeView.html",controller:"homeController"}).when("/petrolhead-101",{templateUrl:"/assets/view/petrolhead101View.html",controller:"petrolhead101Controller"}).when("/cars-timeline",{templateUrl:"/assets/view/carsTimelineView.html",controller:"carsTimelineController"}).when("/about",{templateUrl:"/assets/view/aboutView.html",controller:"aboutController"}).when("/404",{templateUrl:"/assets/view/404.html"}).otherwise({templateUrl:"/assets/view/404.html"})}]);
var APIEndPoint="https://extrabhp.com/s",APIEndPoint,UIEndPoint="https://extrabhp.com";app.service("API",["$http",function(t){return{call:function(e,n,a,i){return t({method:e,url:APIEndPoint+n,data:a,headers:i})}}}]),app.service("UI",["$http",function(t){return{call:function(e,n,a,i){return t({method:e,url:UIEndPoint+n,data:a,headers:i})}}}]),app.service("whatCarService",["API",function(t){this.getQuestion=function(e){var n={"Content-Type":"application/x-www-form-urlencoded"};return t.call("post","/whatCar",e,n)},this.sendIsHelpful=function(e,n){var a={whatCarLogId:e,isHelpful:n},i={"Content-Type":"application/json"};return t.call("post","/whatCar/isHelpful",JSON.stringify(a),i)},this.sendFeedback=function(e,n){var a={whatCarLogId:e,feedback:n},i={"Content-Type":"application/json"};return t.call("post","/whatCar/feedback",JSON.stringify(a),i)}}]),app.service("carsTimelineService",["API",function(t){this.getTimeline=function(){var e={"Content-Type":"application/x-www-form-urlencoded"};return t.call("get","/carsTimeline",null,e)}}]),app.service("UIService",["UI",function(t){this.getModal=function(e){return t.call("get","/assets/modal/"+e+".html")}}]),app.service("feedbackService",["API",function(t){this.submitFeedback=function(e,n){var a={email:e,content:n},i={"Content-Type":"application/json"};return t.call("put","/feedback",JSON.stringify(a),i)}}]);
app.controller("aboutController",["$scope",function(o){}]);
app.controller("carsTimelineController",["$scope","carsTimelineService",function(e,i){e.loading=!0,e.timelineDate=null,e.isTimelineDate=function(i,n){return null===e.timelineDate?(n&&(e.timelineDate=i),!0):e.timelineDate!==i&&(n&&(e.timelineDate=i),!0)},e.init=function(){i.getTimeline().then(function(i){e.timeline=i.data,e.loading=!1},function(e){})}}]);
app.controller("homeController",["$scope","$timeout","alerts","whatCarService",function(e,n,o,s){var t=null;e.getQuestion=function(){e.loading=!0,s.getQuestion(e.answers).then(function(n){200===n.status?(e.question=n.data,void 0!==e.question.type&&"multiple_choice"===e.question.type&&e.question.answers.forEach(function(e){this[e.value]=!1},e.checkboxModel),e.loading=!1):201===n.status?(e.result=n.data.result,e.loading=!1,t=n.data.whatCarLogId):o.oops()},function(e){o.oops()})},e.submitAnswer=function(n,o){e.answers[n]=o,e.getQuestion()},e.submitCheckboxModel=function(n){e.answers[n]=e.getCheckedBoxesValue(),e.checkboxModel={},e.getQuestion()},e.getCheckedBoxesValue=function(){console.log(e.checkboxModel);var n=[];return angular.forEach(e.checkboxModel,function(e,n){e===!0&&this.push(n)},n),n.join(",")},e.init=function(){e.answers={},e.question=null,e.result=null,e.checkboxModel={},e.loading=!0,e.isHelpful.show=!0,e.isHelpful.loading=!1,e.feedback.show=!1,e.feedback.loading=!1,e.feedback.value=null,e.showThanks=!1,t=null,e.getQuestion()},e.tryAgain=function(){e.init()},e.isHelpful={show:!0,loading:!1,send:function(n){e.isHelpful.loading=!0,s.sendIsHelpful(t,n).then(function(n){e.isHelpful.loading=!1,e.isHelpful.show=!1,e.feedback.show=!0},function(e){o.oops()})}},e.feedback={show:!1,loading:!1,value:null,send:function(){e.feedback.loading=!0,s.sendFeedback(t,e.feedback.value).then(function(o){e.feedback.loading=!1,e.feedback.show=!1,e.showThanks=!0,n(function(){e.showThanks=!1},1e3)},function(e){o.oops()})}},e.back=function(){var n=null;angular.forEach(e.answers,function(e,o){n=o}),delete e.answers[n],e.getQuestion()},e.showBack=function(){return JSON.stringify(e.answers)!==JSON.stringify({})}}]);
app.controller("mainController",["$rootScope","$scope","$location","$anchorScroll","feedbackService","$timeout",function(e,a,t,o,n,c){e.alerts=[],e.pushAlert=function(a,t){e.alerts.push({type:a,message:t})},e.closeAlert=function(a){e.alerts.slice(1,a)},e.$on("$locationChangeStart",function(){$(window).off(".affix"),$("#mainNav").removeData("bs.affix").removeClass("affix affix-top affix-bottom"),$("#mainNav").affix({offset:{top:"/"===t.path()?50:-1}})}),e.scrollTo=function(e){var a=t.hash();t.hash(e),o(),t.hash(a)},a.contactUs={submit:function(){grecaptcha.execute()}},a.feedback={email:null,content:null,loading:!1,showThankYou:!1,submitFailure:!1,submit:function(){a.feedback.loading=!0,n.submitFeedback(a.feedback.email,a.feedback.content).then(function(e){201===e.status?a.feedback.submitSuccess():a.feedback.submitFaild()},function(){a.feedback.submitFaild()})},submitSuccess:function(){a.feedback.loading=!1,a.feedback.showThankYou=!0,a.feedback.submitFailure=!1,c(function(){$("#feedback").modal("hide")},1e3),c(function(){a.feedback.resetForm()},4e3)},submitFaild:function(){a.feedback.loading=!1,a.feedback.submitFailure=!0},resetForm:function(){a.feedback.email=null,a.feedback.content=null,a.feedback.loading=!1,a.feedback.showThankYou=!1,a.feedback.submitFailure=!1}}}]);
app.controller("petrolhead101Controller",["$scope","$anchorScroll",function(e,t){e.dictionary=[{code:"Petrolhead",name:"Petrolhead",content:"Car Enthusiast"},{code:"JDM",name:"JDM",content:"Japanese domestic market"},{code:"Muscle_car",name:"Muscle Car",content:"American term used to refer to a variety of high-performance automobiles"},{code:"ABS",name:"ABS (Anti-lock braking system)",content:"An anti-lock braking system or anti-skid braking system (ABS) is an automobile safety system that allows the wheels on a motor vehicle to maintain tractive contact with the road surface according to driver inputs while braking, preventing the wheels from locking up (ceasing rotation) and avoiding uncontrolled skidding."},{code:"ESC",name:"ESC / ESP / DSC / ASC",content:"Electronic stability control (ESC), also referred to as electronic stability program (ESP) or dynamic stability control (DSC), is a computerized technology that improves a vehicle's stability by detecting and reducing loss of traction (skidding). When ESC detects loss of steering control, it automatically applies the brakes to help \"steer\" the vehicle where the driver intends to go. Braking is automatically applied to wheels individually, such as the outer front wheel to counter oversteer or the inner rear wheel to counter understeer. Some ESC systems also reduce engine power until control is regained. ESC does not improve a vehicle's cornering performance; instead, it helps to minimize the loss of control."},{code:"Powertrain",name:"Powertrain",content:"The mechanism that transmits the drive from the engine of a vehicle to its axle."}]}]);
app.directive("pageFooter",function(){return{restrict:"E",templateUrl:"/assets/directive/footer.html"}});

app.directive("pageHeader",function(){var e=["$scope",function(e){}];return{restrict:"E",templateUrl:"/assets/directive/header.html",controller:e}});
app.directive("tooltip",function(){return{restrict:"A",link:function(t,i,o){$(i).hover(function(){$(i).tooltip("show")},function(){$(i).tooltip("hide")})}}});
app.service("alerts",["$rootScope","$timeout",function(n,t){n.alerts=[];n.pushAlert=function(t,e){n.alerts.push({type:t,message:e})},n.closeAlert=function(t){n.alerts.slice(1,t)},n.$on("$routeChangeStart",function(){n.alerts=[]});var e=function(t,e){n.alerts.push({type:t,message:e,icn:""})};this.success=function(n){e("success",n)},this.info=function(n){e("info",n)},this.warning=function(n){e("warning",n)},this.danger=function(n){e("danger",n)},this.oops=function(){e("danger","Something went wrong !!")}}]);